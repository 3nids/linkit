{"name":"Linkit","tagline":"Link It offers an easy way to link features on the map from the available relations in the project.","body":"## What ? \r\n\r\nLink It offers an easy way to link features on the map from the available relations in the project.\r\n\r\n## How ?\r\n\r\nA demo is visible on [youtube](http://youtu.be/KhpVAQ0Irqg).\r\n\r\n1. Create relation in the project properties\r\n2. In the referencing layer properties, set the corresponding field as a \"relation reference\" widget\r\n3. Show the dock using the dedicated icon\r\n4. Select the corresponding relation\r\n5. Using the provided map tool, choose the referencing feature you want to show/edit.\r\n6. If editing on the referencing layer is turned on, you can choose a new referenced map tool using the other provided map tool.\r\n\r\n## Tip\r\n\r\nIf you want to have a postgis layer drawing a nice arrow from one feature (child) to another (parent), here you go.\r\nJust change the values between underscores. \r\n\r\n\tCREATE OR REPLACE VIEW _schema_._view_name_ AS\r\n\t\tSELECT child, parent,\r\n\t\t\t ST_CurveToLine(ST_GeomFromEWKT('SRID=_YOURSRID_;CIRCULARSTRING('\r\n\t\t\t\t||ST_X(start_point)||' '||ST_Y(start_point)\r\n\t\t\t\t||','||\r\n\t\t\t\tST_X(middle_point)+distance*cos(azimuth)||' '||ST_Y(middle_point)+distance*sin(azimuth)\r\n\t\t\t\t||','||\r\n\t\t\t\tST_X(end_point)||' '||ST_Y(end_point) \r\n\t\t\t\t||')'\r\n\t\t\t),15)::geometry(LineString,21781) AS wkb_geometry\r\n\t\tFROM (\r\n\t\t\tSELECT child,parent,\r\n\t\t\t\tstart_point , end_point ,\r\n\t\t\t\tpi()/2+ST_Azimuth(start_point,end_point) AS azimuth,\r\n\t\t\t\t.5*ST_Distance(start_point,end_point) AS distance,\r\n\t\t\t\tST_Line_Interpolate_Point(ST_MakeLine( start_point , end_point ),.5)::geometry(Point,21781) AS middle_point\r\n\t\t\tFROM (\r\n\t\t\t\tSELECT a.id AS child ,b.id AS parent, \r\n\t\t\t\t\t\tST_Line_Interpolate_Point(a.wkb_geometry,.5)::geometry(Point,21781) AS start_point,\r\n\t\t\t\t\t\t/* select end_point at 4 meters from the closest side of the pipe */\r\n\t\t\t\t\t\tST_ClosestPoint(ST_MakeLine(  \r\n\t\t\t\t\t\t\tST_Line_Interpolate_Point(b.wkb_geometry,   LEAST(1,  4/b._length2d/2))::geometry(Point,21781) ,\r\n\t\t\t\t\t\t\tST_Line_Interpolate_Point(b.wkb_geometry,GREATEST(0,1-4/b._length2d/2))::geometry(Point,21781) \r\n\t\t\t\t\t\t),a.wkb_geometry) AS end_point\r\n\t\t\t\tFROM _yourschema_._yourtable_ a \r\n\t\t\t\tINNER JOIN _yourschema_._yourtable_ b ON a._fieldOfParentID_ = b.id\r\n\t\t\t\tWHERE a.id_parent IS NOT NULL\r\n\t\t\t) AS foo\r\n\t\t) AS foo2;\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}